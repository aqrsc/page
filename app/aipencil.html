<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>종합 AI 문서 작성기</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;900&display=swap" rel="stylesheet" />
    <style>
        :root {
            --bg: #0b1020;
            --panel: rgba(23, 27, 45, 0.7);
            --panel-strong: rgba(30, 34, 58, 0.85);
            --border: rgba(255, 255, 255, 0.08);
            --text: #e5e7eb;
            --muted: #9ca3af;
            --accent1: #6366f1;
            --accent2: #8b5cf6;
            --success: #10b981;
            --error: #f87171;
        }
        html { color-scheme: dark; }
        body {
            font-family: 'Inter', system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, 'Apple Color Emoji', 'Segoe UI Emoji';
            background: radial-gradient(1200px 600px at 10% -10%, rgba(79,70,229,.12), transparent 60%),
                        radial-gradient(1000px 500px at 100% 0%, rgba(139,92,246,.1), transparent 55%),
                        var(--bg);
            background-attachment: fixed;
            color: var(--text);
        }
        body::before {
            content: "";
            position: fixed;
            inset: 0;
            background-image: radial-gradient(circle at 1px 1px, rgba(148,163,184,.25) 1px, transparent 0);
            background-size: 28px 28px;
            pointer-events: none;
            mask-image: radial-gradient(circle at 50% 30%, black 40%, transparent 65%);
        }
        .glass-card {
            background: var(--panel);
            backdrop-filter: blur(14px) saturate(120%);
            -webkit-backdrop-filter: blur(14px) saturate(120%);
            border: 1px solid var(--border);
            box-shadow: 0 20px 60px rgba(0,0,0,.35);
        }
        .form-label {
            display: block;
            font-size: 1rem;
            font-weight: 700;
            color: #e5e7eb;
            margin-bottom: .75rem;
        }
        .form-input, .form-textarea {
            width: 100%;
            border: 1px solid #334155;
            border-radius: .75rem;
            padding: 1rem 1rem;
            background-color: rgba(9, 12, 26, .85);
            color: var(--text);
            transition: box-shadow .2s, border-color .2s, transform .08s ease-in-out;
        }
        .form-input:focus, .form-textarea:focus {
            outline: none;
            border-color: var(--accent1);
            box-shadow: 0 0 0 4px rgba(99,102,241,.25);
        }
        .form-textarea { min-height: 220px; resize: vertical; }
        .form-textarea::placeholder, .form-input::placeholder { color: #6b7280; }

        .btn {
            padding: .875rem 1.25rem;
            border-radius: .75rem;
            font-weight: 700;
            color: white;
            transition: all .2s;
            will-change: transform;
        }
        .btn:disabled { opacity: .55; cursor: not-allowed; }
        .btn:active { transform: translateY(1px) scale(.995); }
        .btn-gradient {
            background-image: linear-gradient(90deg, var(--accent1), var(--accent2));
            box-shadow: 0 10px 30px rgba(99,102,241,.45);
        }
        .btn-gradient:hover { box-shadow: 0 16px 40px rgba(139,92,246,.55); }

        .loader {
            border: 4px solid rgba(255,255,255,.18);
            border-top: 4px solid var(--accent1);
            border-radius: 50%; width: 40px; height: 40px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin { to { transform: rotate(360deg); } }

        .headline-gradient {
            background: linear-gradient(90deg, #c7d2fe, #d8b4fe);
            -webkit-background-clip: text; background-clip: text; color: transparent;
            text-shadow: 0 2px 24px rgba(99,102,241,.2);
        }
        .section-title {
            display:flex; align-items:center; gap:.75rem; font-weight:800; letter-spacing:-.01em;
        }
        .section-title::after {
            content:""; flex:1; height:1px; background: linear-gradient(90deg, rgba(255,255,255,.15), rgba(255,255,255,0));
        }
        #error-message { background: rgba(190,18,60,.1); border: 1px solid rgba(190,18,60,.25); }
        
        /* Navigation & Tone Selector */
        .nav-btn {
            background-color: transparent;
            border: 1px solid var(--border);
            color: var(--muted);
        }
        .nav-btn.active {
            background-color: var(--accent1);
            color: white;
            border-color: var(--accent1);
            box-shadow: 0 5px 20px rgba(99,102,241,.3);
        }
        /* Feature Panel Specifics */
        .feature-panel { display: none; }
        .feature-panel.active { display: block; }
        .output-box {
            background-color: rgba(9, 12, 26, .85);
            border: 1px solid #334155;
            border-radius: .75rem;
            padding: 1rem;
            min-height: 220px;
            white-space: pre-wrap;
            word-break: break-word;
        }
        .tweet-card {
            background: linear-gradient(180deg, rgba(30,41,59,.75), rgba(17,24,39,.65));
            border: 1px solid var(--border);
            border-radius: .875rem; padding: 1rem; margin-bottom: 1rem;
            white-space: pre-wrap; transition: border-color .2s, transform .12s ease;
        }
        .tweet-card:hover { border-color: rgba(99,102,241,.5); transform: translateY(-1px); }
    </style>
</head>
<body class="text-white">
    <div class="relative">
        <div class="absolute inset-x-0 -top-24 h-40 blur-3xl opacity-50" style="background: radial-gradient(600px 180px at 50% 100%, rgba(99,102,241,.35), transparent 60%), radial-gradient(600px 180px at 20% 100%, rgba(139,92,246,.3), transparent 60%)"></div>
        <header class="relative text-center py-14">
            <h1 class="text-5xl md:text-6xl font-black tracking-tight mb-4 headline-gradient">종합 AI 문서 작성기</h1>
            <p class="text-base md:text-lg text-gray-300 max-w-3xl mx-auto">AI 기반 문서 생성, 교정, 변환을 한 곳에서 모두 해결하세요.</p>
        </header>
    </div>

    <div class="container mx-auto max-w-7xl px-4 pb-14">
        <!-- Main Navigation -->
        <nav class="flex justify-center gap-2 md:gap-4 mb-8">
            <button class="nav-btn btn active" data-target="feature-coin-page">🪙 코인 페이지 생성기</button>
            <button class="nav-btn btn" data-target="feature-spell-checker">✍️ 맞춤법 검사기</button>
            <button class="nav-btn btn" data-target="feature-telegram-converter">✈️ 텔레그램 게시글 변환기</button>
        </nav>

        <!-- Feature Panels Container -->
        <main id="features-container">
            <!-- 1. Coin Page Generator -->
            <div id="feature-coin-page" class="feature-panel active">
                <div class="glass-card rounded-2xl p-6 md:p-10 shadow-2xl">
                    <div class="grid grid-cols-1 lg:grid-cols-12 gap-8">
                        <div class="lg:col-span-7 space-y-10">
                            <section>
                                <h2 class="section-title text-xl mb-5">1. 리서치 자료 붙여넣기</h2>
                                <textarea id="research-data" class="form-textarea" placeholder="프로젝트에 대한 모든 리서치 자료(개요, 기능, 팀, 링크, 차트 코드 등)를 여기에 붙여넣으세요."></textarea>
                                <div class="flex justify-end mt-3 gap-3">
                                    <button id="extract-info-btn" class="btn bg-indigo-600 hover:bg-indigo-700 text-sm py-2 px-4">✨ 정보 자동 채우기</button>
                                </div>
                                <div id="extract-loading-indicator" class="mt-2 flex items-center justify-end hidden">
                                    <div class="loader" style="width:20px;height:20px;border-width:2px;margin-right:8px"></div>
                                    <span class="text-sm text-gray-400">AI가 정보를 추출하고 있습니다...</span>
                                </div>
                            </section>
                            <section>
                                <h2 class="section-title text-xl mb-5">2. 기본 정보 입력</h2>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                    <div>
                                        <label for="coin-name" class="form-label">코인 이름</label>
                                        <input type="text" id="coin-name" class="form-input" placeholder="예: Hey Anon" />
                                    </div>
                                    <div>
                                        <label for="coin-symbol" class="form-label">코인 심볼</label>
                                        <input type="text" id="coin-symbol" class="form-input" placeholder="예: ANON" />
                                    </div>
                                </div>
                            </section>
                            <section>
                                <h2 class="section-title text-xl mb-5">3. 공식 링크</h2>
                                <textarea id="official-links" class="form-textarea" style="min-height: 140px" placeholder="https://heyanon.ai/ (공식 웹사이트)&#10;https://x.com/HeyAnonai (트위터)"></textarea>
                            </section>
                            <section>
                                <h2 class="section-title text-xl mb-5">4. 차트 임베드 주소</h2>
                                <input type="url" id="chart-embed" class="form-input" placeholder="차트의 URL 또는 <iframe> 코드를 붙여넣으세요." />
                            </section>
                            <div class="mt-8">
                                <button id="generate-btn" class="btn btn-gradient text-lg px-7 py-4 w-full md:w-auto">🚀 AI로 페이지 생성하기</button>
                            </div>
                        </div>
                        <aside class="lg:col-span-5">
                            <div class="glass-card rounded-xl p-5">
                                <h3 class="font-extrabold text-lg mb-3">미리보기 패널</h3>
                                <p class="text-sm text-gray-400 mb-4">페이지를 생성하면 오른쪽 패널에서 실시간 미리보기가 표시됩니다. 아래의 결과 영역에서 코드 복사도 가능합니다.</p>
                                <div class="border border-white/10 rounded-lg overflow-hidden">
                                    <div class="h-[260px] bg-gradient-to-br from-slate-900 to-slate-800 flex items-center justify-center text-gray-400">대기 중…</div>
                                </div>
                            </div>
                        </aside>
                    </div>
                    <div id="loading-indicator" class="mt-8 flex-col items-center justify-center hidden">
                        <div class="loader mx-auto"></div>
                        <p class="mt-4 text-gray-400">AI가 내용을 분석하고 페이지를 생성 중입니다. 잠시만 기다려주세요...</p>
                    </div>
                    <div id="output-container" class="mt-12 hidden">
                         <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-3 mb-4">
                            <h2 class="text-2xl font-extrabold tracking-tight">생성된 결과</h2>
                            <div class="flex gap-2">
                                <button id="preview-btn" class="btn bg-slate-700 hover:bg-slate-600">미리보기</button>
                                <button id="copy-btn" class="btn bg-slate-700 hover:bg-slate-600">코드 복사</button>
                            </div>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 rounded-lg border border-white/10 overflow-hidden">
                            <textarea id="html-output" readonly class="w-full border-r border-slate-700 p-4 font-mono text-sm bg-[#0b1220] text-slate-400 h-[600px]"></textarea>
                            <div id="preview-panel" class="w-full p-4 h-[600px] bg-transparent">
                                <iframe id="preview-iframe" class="w-full h-full border-0 rounded-lg bg-white shadow-lg"></iframe>
                            </div>
                        </div>
                        <div id="copy-message" class="mt-2 text-sm text-right hidden text-green-400">복사되었습니다!</div>
                        <div id="tweet-generator-container" class="mt-12 pt-8 border-t border-white/10 hidden">
                            <h3 class="text-2xl font-extrabold text-center mb-6">다음 단계: 프로젝트 홍보하기</h3>
                            <div class="text-center">
                                <button id="generate-tweets-btn" class="btn bg-emerald-600 hover:bg-emerald-700 text-lg">🕊️ AI로 홍보 트윗 생성하기</button>
                            </div>
                            <div id="tweet-loading-indicator" class="mt-6 flex-col items-center justify-center hidden">
                                <div class="loader mx-auto"></div>
                                <p class="mt-4 text-gray-400">AI가 매력적인 트윗을 만들고 있습니다...</p>
                            </div>
                            <div id="tweet-results-container" class="mt-6 hidden">
                                <h4 class="text-xl font-bold mb-4">AI가 생성한 홍보 트윗 아이디어:</h4>
                                <div id="tweet-list"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 2. Spell Checker -->
            <div id="feature-spell-checker" class="feature-panel">
                <div class="glass-card rounded-2xl p-6 md:p-10 shadow-2xl">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                        <div>
                            <h2 class="section-title text-xl mb-5">원본 텍스트</h2>
                            <textarea id="spell-check-input" class="form-textarea" placeholder="여기에 맞춤법을 검사할 텍스트를 입력하세요."></textarea>
                        </div>
                        <div>
                            <div class="flex justify-between items-center mb-5">
                                <h2 class="section-title text-xl">교정된 텍스트</h2>
                                <button id="spell-check-copy-btn" class="btn bg-slate-700 hover:bg-slate-600 text-sm py-2 px-3">📄 텍스트 복사</button>
                            </div>
                             <div id="spell-check-copy-message" class="text-sm text-right hidden text-green-400 mb-2">복사되었습니다!</div>
                            <div id="spell-check-output" class="output-box">결과가 여기에 표시됩니다.</div>
                        </div>
                    </div>
                    <div class="mt-8">
                        <button id="spell-check-btn" class="btn btn-gradient text-lg">✍️ AI로 맞춤법 검사하기</button>
                    </div>
                    <div id="spell-check-loading" class="mt-8 flex-col items-center justify-center hidden">
                        <div class="loader mx-auto"></div>
                        <p class="mt-4 text-gray-400">AI가 텍스트를 교정하고 있습니다...</p>
                    </div>
                </div>
            </div>

            <!-- 3. Telegram Post Converter -->
            <div id="feature-telegram-converter" class="feature-panel">
                <div class="glass-card rounded-2xl p-6 md:p-10 shadow-2xl">
                     <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                        <div>
                            <h2 class="section-title text-xl mb-5">원본 텍스트</h2>
                            <textarea id="telegram-input" class="form-textarea" placeholder="텔레그램 게시글로 변환할 원본 내용을 여기에 입력하세요."></textarea>
                        </div>
                        <div>
                            <div class="flex justify-between items-center mb-5">
                                <h2 class="section-title text-xl">텔레그램 게시글 (미리보기)</h2>
                                <button id="telegram-copy-btn" class="btn bg-slate-700 hover:bg-slate-600 text-sm py-2 px-3">📄 텍스트 복사</button>
                            </div>
                            <div id="telegram-copy-message" class="text-sm text-right hidden text-green-400 mb-2">복사되었습니다!</div>
                            <div id="telegram-output" class="output-box">결과가 여기에 표시됩니다.</div>
                        </div>
                    </div>
                    <div class="mt-8 mb-4">
                        <h3 class="form-label text-base">글투 선택 (Tone)</h3>
                        <div id="tone-selector" class="flex flex-wrap gap-2">
                            <button class="nav-btn btn flex-1" data-tone="formal">🧑‍💼 전문가</button>
                            <button class="nav-btn btn flex-1 active" data-tone="friendly">😊 친근하게</button>
                            <button class="nav-btn btn flex-1" data-tone="concise">⚡️ 간결하게</button>
                        </div>
                    </div>
                    <div class="mt-8">
                        <button id="telegram-convert-btn" class="btn btn-gradient text-lg">✈️ AI로 텔레그램 게시글 변환</button>
                    </div>
                    <div id="telegram-loading" class="mt-8 flex-col items-center justify-center hidden">
                        <div class="loader mx-auto"></div>
                        <p class="mt-4 text-gray-400">AI가 텔레그램 게시글을 생성하고 있습니다...</p>
                    </div>
                </div>
            </div>
             <div id="error-message" class="mt-6 text-center text-red-300 p-4 rounded-lg hidden"></div>
        </main>
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        // --- UTILS & SHARED ELEMENTS ---
        const errorMessage = document.getElementById('error-message');

        async function callGeminiAPI(prompt, schema, retries = 3, delay = 1000) {
            const apiKey = ""; // API Key is handled by the environment
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;
            
            const payload = { 
                contents: [{ role: "user", parts: [{ text: prompt }] }], 
            };

            if (schema) {
                payload.generationConfig = { 
                    responseMimeType: "application/json", 
                    responseSchema: schema 
                };
            }

            for (let i = 0; i < retries; i++) {
                try {
                    const response = await fetch(apiUrl, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(payload) });
                    if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
                    const result = await response.json();
                    if (result.candidates?.[0]?.content?.parts?.[0]?.text) {
                        // If a schema was expected, parse the JSON string. Otherwise, return the text directly.
                        return schema ? JSON.parse(result.candidates[0].content.parts[0].text) : result.candidates[0].content.parts[0].text;
                    } else { throw new Error("Invalid response structure from API"); }
                } catch (error) {
                    console.error(`Attempt ${i + 1} failed:`, error);
                    if (i < retries - 1) { await new Promise(res => setTimeout(res, delay)); delay *= 2; }
                    else { throw error; }
                }
            }
        }

        // --- NAVIGATION LOGIC ---
        const navButtons = document.querySelectorAll('nav > .nav-btn');
        const featurePanels = document.querySelectorAll('.feature-panel');

        navButtons.forEach(button => {
            button.addEventListener('click', (e) => {
                const targetId = button.dataset.target;
                
                navButtons.forEach(btn => btn.classList.remove('active'));
                button.classList.add('active');
                
                featurePanels.forEach(panel => {
                    panel.classList.remove('active');
                    if (panel.id === targetId) {
                        panel.classList.add('active');
                    }
                });
            });
        });

        // --- FEATURE 1: COIN PAGE GENERATOR ---
        const researchDataInput = document.getElementById('research-data');
        const extractInfoBtn = document.getElementById('extract-info-btn');
        const extractLoadingIndicator = document.getElementById('extract-loading-indicator');
        const coinNameInput = document.getElementById('coin-name');
        const coinSymbolInput = document.getElementById('coin-symbol');
        const officialLinksInput = document.getElementById('official-links');
        const chartEmbedInput = document.getElementById('chart-embed');
        const generateBtn = document.getElementById('generate-btn');
        const copyBtn = document.getElementById('copy-btn');
        const previewBtn = document.getElementById('preview-btn');
        const loadingIndicator = document.getElementById('loading-indicator');
        const outputContainer = document.getElementById('output-container');
        const htmlOutput = document.getElementById('html-output');
        const previewIframe = document.getElementById('preview-iframe');
        const copyMessage = document.getElementById('copy-message');
        const tweetGeneratorContainer = document.getElementById('tweet-generator-container');
        const generateTweetsBtn = document.getElementById('generate-tweets-btn');
        const tweetLoadingIndicator = document.getElementById('tweet-loading-indicator');
        const tweetResultsContainer = document.getElementById('tweet-results-container');
        const tweetList = document.getElementById('tweet-list');
        let generatedKoreanSummary = '';

        const baseHtmlTemplate = `
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="page-title">{{COIN_NAME}} ({{COIN_SYMBOL}}) 프로젝트</title>
    <style>
        :root{--bg:#0f172a; --card:#ffffff; --ink:#0f172a; --muted:#64748b; --line:#e2e8f0; --accent:#334155;--brand:#0ea5e9; --brand2:#6366f1;}
        body{font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif;margin:0;padding:0;background:linear-gradient(180deg,#f8fafc,#eef2f7);color:#0f172a;line-height:1.65}
        .container{max-width:1000px;margin:24px auto;padding:0 20px}
        header{position:relative;text-align:center;padding:18px 0;border-bottom:1px solid var(--line);margin-bottom:24px}
        .home-button{position:absolute;top:50%;left:0;transform:translateY(-50%);text-decoration:none;background:#eef2f7;color:#334155;padding:10px 14px;border-radius:10px;font-weight:700;border:1px solid #e2e8f0}
        .home-button:hover{background:#e5ebf2}
        header h1{font-size:2.2em;color:#0f172a;margin:0;letter-spacing:-.02em}
        .card{background:var(--card);border-radius:16px;box-shadow:0 8px 30px rgba(2,6,23,.08);padding:26px;margin-bottom:22px;overflow:hidden;border:1px solid #e5e7eb}
        h2{font-size:1.5em;color:#0f172a;margin:0 0 12px 0}
        .card-header{display:flex;justify-content:space-between;align-items:center;border-bottom:1px dashed #e5e7eb;margin:-6px -6px 16px -6px;padding:6px}
        .lang-switcher button{background:#f1f5f9;border:1px solid #e2e8f0;padding:8px 14px;cursor:pointer;border-radius:8px;font-weight:800;margin-left:6px;color:#0f172a}
        .lang-switcher button.active{background:linear-gradient(90deg,#60a5fa,#a78bfa);color:white;border-color:transparent}
        .content-block h3{font-size:1.15em;color:#0f172a;margin-top:22px;border-bottom:1px solid #eef2f7;padding-bottom:8px}
        .content-block ul{padding-left:20px}
        .content-block code{background:#f1f5f9;padding:2px 6px;border-radius:6px;font-family:ui-monospace,Menlo,Consolas,monospace;word-break:break-all}
        .official-links ul{list-style:none;padding:0;margin:0}
        .official-links li{margin-bottom:12px}
        .official-links a{display:inline-flex;align-items:center;text-decoration:none;color:#0369a1;font-weight:800;font-size:1.05em}
        .official-links a:hover{text-decoration:underline}
        .official-links a svg{width:19px;height:19px;margin-left:8px;fill:#0369a1}
        .chart-container{position:relative;width:100%;height:560px;border:1px solid #e5e7eb;border-radius:14px;overflow:hidden}
        #geckoterminal-embed{width:100%;height:100%;border:none}
        .disclaimer{font-size:.95em;color:#475569;background:#f1f5f9;padding:14px;border-left:4px solid #94a3b8;border-radius:8px}
        footer{text-align:center;padding:18px 0;margin-top:26px;font-size:.95em;color:#64748b}
        @media(max-width:768px){header h1{font-size:1.75em}.chart-container{height:420px}.container{padding:0 14px}.card-header{flex-direction:column;align-items:flex-start}.lang-switcher{width:100%;text-align:right;margin-top:10px}}
    </style>
</head>
<body>
    <div class="container">
        <header>
            <a href="../index.html" class="home-button"><span class="lang-ko">← 홈으로</span><span class="lang-en" style="display:none;">← Back to Home</span></a>
            <h1 id="main-title"><span class="lang-ko">{{COIN_NAME}} ({{COIN_SYMBOL}}) 프로젝트</span><span class="lang-en" style="display:none;">{{COIN_NAME}} ({{COIN_SYMBOL}}) Project</span></h1>
        </header>
        <main>
            <section class="card">
                <div class="card-header">
                    <h2 id="intro-title"><span class="lang-ko">프로젝트 소개</span><span class="lang-en" style="display:none;">Project Overview</span></h2>
                    <div class="lang-switcher"><button id="btn-ko" class="active">한국어</button><button id="btn-en">English</button></div>
                </div>
                <div class="content-block lang-ko">{{SUMMARY_KO}}</div>
                <div class="content-block lang-en" style="display:none;">{{SUMMARY_EN}}</div>
            </section>
            <section class="card">
                <div class="card-header"><h2 id="chart-title"><span class="lang-ko">실시간 가격/시총 차트</span><span class="lang-en" style="display:none;">Real-time Price/MC Chart</span></h2></div>
                <div class="chart-container"><iframe height="100%" width="100%" id="geckoterminal-embed" title="GeckoTerminal Embed" src="{{CHART_EMBED_URL}}" frameborder="0" allow="clipboard-write" allowfullscreen></iframe></div>
            </section>
            <section class="card official-links">
                <div class="card-header"><h2 id="links-title"><span class="lang-ko">공식 링크 및 커뮤니티</span><span class="lang-en" style="display:none;">Official Links & Community</span></h2></div>
                <ul>{{OFFICIAL_LINKS}}</ul>
            </section>
            <section class="card">
                <div class="card-header"><h2 id="disclaimer-title"><span class="lang-ko">투자 유의사항</span><span class="lang-en" style="display:none;">Investment Disclaimer</span></h2></div>
                <p class="disclaimer"><span class="lang-ko">암호화폐 투자는 높은 변동성으로 인해 원금 손실의 위험이 매우 큽니다. 본 페이지의 정보는 투자 권유가 아닙니다. 모든 투자 결정과 책임은 투자자 본인에게 있습니다.</span><span class="lang-en" style="display:none;">Cryptocurrency investment involves a very high risk of principal loss due to high volatility. The information on this page is not an investment recommendation. All investment decisions and responsibilities lie with the investor.</span></p>
            </section>
        </main>
        <footer><p>All information is for educational purposes only.</p></footer>
    </div>
    <script>
        const btnKo = document.getElementById('btn-ko'), btnEn = document.getElementById('btn-en'), contentsKo = document.querySelectorAll('.lang-ko'), contentsEn = document.querySelectorAll('.lang-en');
        function setLanguage(lang){if(lang==='ko'){contentsKo.forEach(el=>el.style.display='block');contentsEn.forEach(el=>el.style.display='none');btnKo.classList.add('active');btnEn.classList.remove('active');}else{contentsKo.forEach(el=>el.style.display='none');contentsEn.forEach(el=>el.style.display='block');btnEn.classList.add('active');btnKo.classList.remove('active');}}
        btnKo.addEventListener('click',()=>setLanguage('ko'));btnEn.addEventListener('click',()=>setLanguage('en'));document.addEventListener('DOMContentLoaded',()=>setLanguage('ko'));
    <\/script>
</body>
</html>`;
        
        extractInfoBtn.addEventListener('click', async () => {
            const researchData = researchDataInput.value.trim();
            if (!researchData) {
                errorMessage.textContent = '먼저 리서치 자료를 붙여넣어 주세요.';
                errorMessage.style.display = 'block';
                return;
            }

            errorMessage.style.display = 'none';
            extractInfoBtn.disabled = true;
            extractLoadingIndicator.classList.remove('hidden');

            try {
                const extractPrompt = `다음 텍스트에서 코인 이름, 코인 심볼, 공식 링크, 차트 임베드 URL을 추출해줘.\n- 링크는 "https://url (이름)" 형식으로 한 줄에 하나씩 정리해줘.\n- 차트 임베드 URL은 \`<iframe ... src="URL">\`과 같은 HTML 코드에서 \`src\` 속성의 URL 값만 추출해줘. 만약 없다면 빈 문자열로 남겨둬.\n\n--- 텍스트 ---\n${researchData}\n--- 텍스트 끝 ---`;
                const extractSchema = {
                    type: "OBJECT",
                    properties: {
                        coinName: { type: "STRING" },
                        coinSymbol: { type: "STRING" },
                        officialLinks: { type: "STRING" },
                        chartEmbedUrl: { type: "STRING" }
                    },
                    required: ["coinName", "coinSymbol", "officialLinks", "chartEmbedUrl"]
                };
                const result = await callGeminiAPI(extractPrompt, extractSchema);
                coinNameInput.value = result.coinName || '';
                coinSymbolInput.value = result.coinSymbol || '';
                officialLinksInput.value = result.officialLinks || '';
                chartEmbedInput.value = result.chartEmbedUrl || '';
            } catch (error) {
                errorMessage.textContent = '정보 추출 중 오류가 발생했습니다.';
                errorMessage.style.display = 'block';
            } finally {
                extractInfoBtn.disabled = false;
                extractLoadingIndicator.classList.add('hidden');
            }
        });

        generateBtn.addEventListener('click', async () => {
            let chartEmbedValue = chartEmbedInput.value.trim();
            const iframeSrcMatch = chartEmbedValue.match(/src="([^"]+)"/);
            if (iframeSrcMatch && iframeSrcMatch[1]) {
                chartEmbedValue = iframeSrcMatch[1];
                chartEmbedInput.value = chartEmbedValue;
            }

            const researchData = researchDataInput.value.trim();
            const coinName = coinNameInput.value.trim();
            const coinSymbol = coinSymbolInput.value.trim().toUpperCase();
            const officialLinks = officialLinksInput.value.trim();

            if (!coinName || !coinSymbol || !researchData || !officialLinks || !chartEmbedValue) {
                errorMessage.textContent = '모든 필드를 채워주세요.';
                errorMessage.style.display = 'block';
                return;
            }

            errorMessage.style.display = 'none';
            generateBtn.disabled = true;
            loadingIndicator.classList.remove('hidden');
            outputContainer.style.display = 'none';
            tweetGeneratorContainer.style.display = 'none';
            tweetResultsContainer.style.display = 'none';
            tweetList.innerHTML = '';

            try {
                const summaryPrompt = `당신은 전문 암호화폐 분석가이자 카피라이터입니다. 아래 제공된 리서치 자료를 바탕으로 프로젝트를 요약하고, 그 내용을 HTML 형식으로 정리해주세요. 각 섹션별로 7문장 이하로 핵심만 요약해야 합니다. 작성된 내용은 AI가 쓴 것처럼 느껴지지 않도록, 전문적이면서도 자연스럽고 설득력 있는 어조로 작성해주세요. 너무 딱딱하거나 기계적인 표현은 피해야 합니다.\n\n결과는 반드시 한국어(ko)와 영어(en) 두 가지 버전으로 제공해야 합니다.\n\n각 언어별 요약은 다음 섹션들을 포함해야 합니다:\n1. **프로젝트 개요 및 컨셉**\n2. **주요 기능 및 기술**\n3. **토큰 상세 정보**: **아래의 HTML <ul> 리스트 형식을 반드시, 정확하게 지켜서 생성해야 합니다. 다른 형식은 절대 사용하지 마세요.**\n   <h3>토큰 상세 정보</h3>\n   <ul>\n       <li><strong>토큰 이름:</strong> [토큰 이름]</li>\n       <li><strong>심볼(Symbol):</strong> [심볼]</li>\n       <li><strong>네트워크:</strong> [네트워크]</li>\n       <li><strong>컨트랙트 주소 (Solana):</strong> <code>[솔라나 주소]</code></li>\n       <li><strong>컨트랙트 주소 (EVM):</strong> <code>[EVM 주소]</code></li>\n       <li><strong>토큰 표준:</strong> [토큰 표준]</li>\n       <li><strong>총 발행량:</strong> [총 발행량]</li>\n   </ul>\n   (자료에 없는 정보는 해당 <li> 항목을 생략하세요.)\n4. **팀 및 파트너십**\n5. **리스크 요인**\n\n--- 리서치 자료 ---\n${researchData}\n--- 자료 끝 ---`;
                const summarySchema = { type: "OBJECT", properties: { summary_ko: { type: "STRING" }, summary_en: { type: "STRING" } }, required: ["summary_ko", "summary_en"] };

                const aiResult = await callGeminiAPI(summaryPrompt, summarySchema);
                generatedKoreanSummary = aiResult.summary_ko;

                const linkItems = officialLinks.split('\n').map(line => {
                    const match = line.match(/(https?:\/\/[^\s]+)\s*\((.+)\)/);
                    if (match) {
                        const url = match[1];
                        const text = match[2];
                        let svgIcon = '';
                        let titleAttr = '';
                        if (text.toLowerCase().includes('twitter') || url.includes('x.com')) {
                            svgIcon = ' <svg viewBox="0 0 24 24" aria-hidden="true" style="width:1.1em; height:1.1em; display:inline-block; vertical-align:text-bottom; fill:currentColor;"><g><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"></path></g></svg>';
                            titleAttr = ' title="트위터 바로가기"';
                        }
                        return `<li><a href="${url}" target="_blank" rel="noopener noreferrer"${titleAttr}>${text}${svgIcon}</a></li>`;
                    }
                    if (line.startsWith('http')) {
                        let name = 'Official Link';
                        try { name = new URL(line).hostname.replace('www.', ''); } catch (e) {}
                        return `<li><a href="${line}" target="_blank" rel="noopener noreferrer">${name}</a></li>`;
                    }
                    return '';
                }).join('\n                        ');

                let finalHtml = baseHtmlTemplate
                    .replace(/{{COIN_NAME}}/g, coinName)
                    .replace(/{{COIN_SYMBOL}}/g, coinSymbol)
                    .replace('{{SUMMARY_KO}}', aiResult.summary_ko)
                    .replace('{{SUMMARY_EN}}', aiResult.summary_en)
                    .replace('{{CHART_EMBED_URL}}', chartEmbedValue)
                    .replace('{{OFFICIAL_LINKS}}', linkItems);

                htmlOutput.value = finalHtml;
                previewIframe.srcdoc = finalHtml;
                outputContainer.style.display = 'block';
                tweetGeneratorContainer.style.display = 'block';
                outputContainer.scrollIntoView({ behavior: 'smooth' });

            } catch (error) {
                errorMessage.textContent = '페이지 생성 중 오류가 발생했습니다.';
                errorMessage.style.display = 'block';
            } finally {
                generateBtn.disabled = false;
                loadingIndicator.classList.add('hidden');
            }
        });

        generateTweetsBtn.addEventListener('click', async () => {
            if (!generatedKoreanSummary) {
                errorMessage.textContent = '먼저 페이지를 생성해주세요.';
                errorMessage.style.display = 'block';
                return;
            }
            const coinName = coinNameInput.value.trim();
            const coinSymbol = coinSymbolInput.value.trim().toUpperCase();

            generateTweetsBtn.disabled = true;
            tweetLoadingIndicator.classList.remove('hidden');
            tweetResultsContainer.style.display = 'none';
            tweetList.innerHTML = '';

            try {
                const tweetPrompt = `당신은 창의적인 암호화폐 마케팅 전문가입니다. ${coinName} (${coinSymbol}) 프로젝트의 다음 한국어 요약본을 바탕으로, 프로젝트를 홍보할 수 있는 매력적이고 유익한 트윗 3개를 한국어로 작성해주세요. AI가 쓴 것처럼 느껴지지 않도록, 실제 커뮤니티 매니저가 소통하는 것처럼 자연스럽고 생생한 어투를 사용해주세요.\n\n트윗은 간결해야 하며, 관련성 높은 해시태그(#${coinSymbol}, #블록체인, #AI, #크립토 등)를 포함해야 합니다. 사용자들이 프로젝트에 대해 더 알아보고 싶게 만들어주세요.\n\n--- 프로젝트 요약 (한국어) ---\n${generatedKoreanSummary}\n--- 요약 끝 ---`;
                const tweetSchema = { type: "OBJECT", properties: { tweets: { type: "ARRAY", items: { type: "STRING" } } }, required: ["tweets"] };
                const result = await callGeminiAPI(tweetPrompt, tweetSchema);

                if (result.tweets && result.tweets.length > 0) {
                    result.tweets.forEach(tweetText => {
                        const tweetCard = document.createElement('div');
                        tweetCard.className = 'tweet-card';
                        tweetCard.innerText = tweetText;
                        tweetList.appendChild(tweetCard);
                    });
                    tweetResultsContainer.style.display = 'block';
                    tweetResultsContainer.scrollIntoView({ behavior: 'smooth' });
                }
            } catch (error) {
                console.error('Error generating tweets:', error);
                errorMessage.textContent = '트윗 생성 중 오류가 발생했습니다.';
                errorMessage.style.display = 'block';
            } finally {
                generateTweetsBtn.disabled = false;
                tweetLoadingIndicator.classList.add('hidden');
            }
        });
        
        copyBtn.addEventListener('click', () => {
            htmlOutput.select();
            try {
                // Using execCommand for broader compatibility in sandboxed environments
                document.execCommand('copy');
                copyMessage.classList.remove('hidden');
                setTimeout(() => { copyMessage.classList.add('hidden'); }, 2000);
            } catch (err) {
                console.error('Failed to copy text: ', err);
            }
        });

        previewBtn.addEventListener('click', () => {
            previewIframe.srcdoc = htmlOutput.value;
        });

        // --- FEATURE 2: SPELL CHECKER ---
        const spellCheckInput = document.getElementById('spell-check-input');
        const spellCheckOutput = document.getElementById('spell-check-output');
        const spellCheckBtn = document.getElementById('spell-check-btn');
        const spellCheckLoading = document.getElementById('spell-check-loading');
        const spellCheckCopyBtn = document.getElementById('spell-check-copy-btn');
        const spellCheckCopyMessage = document.getElementById('spell-check-copy-message');

        spellCheckBtn.addEventListener('click', async () => {
            const text = spellCheckInput.value.trim();
            if (!text) {
                errorMessage.textContent = '먼저 검사할 텍스트를 입력해주세요.';
                errorMessage.style.display = 'block';
                return;
            }
            errorMessage.style.display = 'none';
            spellCheckBtn.disabled = true;
            spellCheckLoading.classList.remove('hidden');
            spellCheckOutput.textContent = 'AI가 분석 중...';

            try {
                const prompt = `당신은 다국어 교정 전문가입니다. 다음 텍스트의 언어를 감지하여, 그 언어의 규칙에 맞게 교정해주세요. 단순히 기계적으로 오류를 수정하는 것을 넘어, 문장의 흐름이 더 자연스러워지도록 다듬어주세요. 단, 원문의 의미는 절대 변경해서는 안 됩니다.

**매우 중요**: 어떠한 서문이나 설명도 추가하지 말고, 오직 교정된 최종 텍스트만 응답으로 제공해야 합니다.

- **한국어**: 맞춤법, 띄어쓰기, 문법 오류를 수정합니다.
- **영어**: 철자, 문법, 구두점 오류를 수정합니다.
- **규칙**: 번역하지 말고, 오직 해당 언어 내에서 교정만 수행해야 합니다. AI가 쓴 것처럼 딱딱한 문장이 아닌, 사람이 쓴 것처럼 자연스러운 결과물을 제공해주세요.
- **기타 언어**: "한국어와 영어 맞춤법 검사만 지원합니다."라고 응답해주세요.

--- 원본 텍스트 ---
${text}
--- 텍스트 끝 ---`;
                const result = await callGeminiAPI(prompt, null); // No schema, expect plain text
                spellCheckOutput.textContent = result;
            } catch (error) {
                console.error('Error during spell check:', error);
                errorMessage.textContent = '맞춤법 검사 중 오류가 발생했습니다.';
                errorMessage.style.display = 'block';
                spellCheckOutput.textContent = '오류가 발생했습니다.';
            } finally {
                spellCheckBtn.disabled = false;
                spellCheckLoading.classList.add('hidden');
            }
        });
        
        function copyTextFromElement(element, messageElement) {
            const textToCopy = element.innerText;
            if (textToCopy && textToCopy.trim() !== '결과가 여기에 표시됩니다.' && textToCopy.trim() !== 'AI가 분석 중...') {
                const tempTextArea = document.createElement('textarea');
                tempTextArea.value = textToCopy;
                document.body.appendChild(tempTextArea);
                tempTextArea.select();
                try {
                    document.execCommand('copy');
                    messageElement.classList.remove('hidden');
                    setTimeout(() => { messageElement.classList.add('hidden'); }, 2000);
                } catch (err) {
                    console.error('Failed to copy text: ', err);
                }
                document.body.removeChild(tempTextArea);
            }
        }

        spellCheckCopyBtn.addEventListener('click', () => {
            copyTextFromElement(spellCheckOutput, spellCheckCopyMessage);
        });


        // --- FEATURE 3: TELEGRAM POST CONVERTER ---
        const telegramInput = document.getElementById('telegram-input');
        const telegramOutput = document.getElementById('telegram-output');
        const telegramConvertBtn = document.getElementById('telegram-convert-btn');
        const telegramLoading = document.getElementById('telegram-loading');
        const toneSelector = document.getElementById('tone-selector');
        const toneButtons = toneSelector.querySelectorAll('#tone-selector .nav-btn');
        const telegramCopyBtn = document.getElementById('telegram-copy-btn');
        const telegramCopyMessage = document.getElementById('telegram-copy-message');

        toneButtons.forEach(button => {
            button.addEventListener('click', () => {
                toneButtons.forEach(btn => btn.classList.remove('active'));
                button.classList.add('active');
            });
        });

        telegramCopyBtn.addEventListener('click', () => {
            copyTextFromElement(telegramOutput, telegramCopyMessage);
        });

        telegramConvertBtn.addEventListener('click', async () => {
            const text = telegramInput.value.trim();
            if (!text) {
                errorMessage.textContent = '먼저 변환할 텍스트를 입력해주세요.';
                errorMessage.style.display = 'block';
                return;
            }
            errorMessage.style.display = 'none';
            telegramConvertBtn.disabled = true;
            telegramLoading.classList.remove('hidden');
            telegramOutput.textContent = 'AI가 분석 중...';

            const selectedTone = toneSelector.querySelector('.active').dataset.tone;
            let prompt = '';

            const basePrompt = `당신은 텔레그램 채널을 운영하는 전문 콘텐츠 마케터입니다. 다음 원본 텍스트를 텔레그램 게시글 형식으로 변환해주세요. AI가 작성한 느낌이 나지 않도록, 실제 커뮤니티 매니저가 소통하는 것처럼 자연스럽고 생생한 어투를 사용해주세요.`;
            const styleGuide = `\n\n--- 스타일 가이드 ---\n* **서식**: 굵은 글씨 마크다운(\`**text**\`)을 절대 사용하지 마세요. 대신 이모지, 줄 바꿈, 적절한 공백(스페이스)을 사용해 내용을 구조화해야 합니다.\n* **구조**: 제목과 주요 섹션은 이모지로 시작하고(예: ✅, 📂, 🪙, 📌), 목록을 표현할 때는 각 항목마다 이모지를 반복하기보다, 하위 항목에 '-', '•' 등을 사용하거나 들여쓰기로만 표현하여 더 깔끔하게 구성해주세요. 문장 앞에는 가급적 기호를 쓰지 말고 공백으로 처리해주세요. 가독성을 위해 문단과 문단 사이에는 충분한 줄 바꿈을 넣어주세요. 관련 해시태그는 본문 끝에 추가합니다.`;
            const examples = `\n\n--- 예시 ---\n🙂 MORPH 한국 커뮤니티 이벤트, MORPH 를 찾아라\n\n✅ Morph 에서 한국 커뮤니티를 대상으로, Morph 찾기 이벤트를 진행합니다\n\n📂 이벤트 참여 방법\n\n  이벤트기간 : ~8/25일까지\n\n  초록색을 찾아라 : Morph를 상징하는 초록색 물건을 찾아 사진 찍기\n\n#MORPH`;
            const textBlock = `\n\n--- 변환할 원본 텍스트 ---\n${text}\n--- 텍스트 끝 ---`;

            if (selectedTone === 'formal') {
                prompt = basePrompt + 
                `\n\n--- 어조 가이드 (전문가 모드) ---\n* **어조**: 매우 전문적이고 객관적인 톤을 유지합니다. 공지사항처럼 간결하고 명확하게 정보를 전달하세요.\n* **문장 끝맺음**: '~합니다', '~될 예정입니다'와 같이 격식있는 표현을 일관되게 사용합니다. 감정적인 표현이나 불필요한 수식어, '~요'와 같은 구어체는 피합니다.` +
                styleGuide + examples + textBlock;
            } else if (selectedTone === 'concise') {
                prompt = basePrompt +
                `\n\n--- 어조 가이드 (간결한 모드) ---\n* **어조**: 핵심 정보를 빠르게 전달하는 데 집중합니다. 커뮤니티에서 흔히 사용하는 간결하고 직설적인 말투를 사용하세요.\n* **문장 끝맺음**: 문맥에 맞게 서술어를 **생략**하고 **명사형으로 문장을 종결**하여 간결함을 극대화합니다. 예를 들어, "로열티 포인트 제도임"은 "로열티 포인트 제도"로, "핵심 지표로 작용함"은 "핵심 지표로 작용"으로 수정해야 합니다. '~함', '~임'과 같은 표현은 절대 사용하지 마세요. 문장이 너무 짧게 끊어지지 않도록, '또한', '그리고' 같은 접속사를 적절히 사용하여 자연스럽게 연결해주세요.` +
                styleGuide + examples + textBlock;
            } else { // friendly (default)
                prompt = basePrompt +
                `\n\n--- 어조 가이드 (친근하게 모드) ---\n* **대상 독자**: 암호화폐에 대해 이제 막 알아가는 초중급자 (전문성 3~4/10 수준)를 대상으로 합니다. 어려운 전문 용어는 피하고, 비유나 쉬운 예시를 들어 설명해주세요.\n* **어조**: 친근하고 유익한 커뮤니티 매니저의 톤을 유지합니다. "안녕하세요, 커뮤니티 여러분!"과 같은 어색한 인사말로 시작하지 말고, 바로 본론으로 들어가거나 자연스러운 질문으로 시작하는 것이 좋습니다.\n* **문장 끝맺음**: 문장의 끝을 '~입니다'나 '~요'로만 반복하지 말고, '**~하죠**', '**~하는 점 참고해주세요**', '**~알아볼까요?**' 등 다양한 어미를 사용하여 실제 사람이 설명하는 듯한 느낌을 줍니다. 단, '**~했답니다**'와 같이 너무 어린 아이에게 말하는 듯한 어투는 절대 사용하지 마세요.` +
                styleGuide + examples + textBlock;
            }

            try {
                const result = await callGeminiAPI(prompt, null); // No schema, expect plain text
                telegramOutput.textContent = result;
            } catch (error) {
                console.error('Error during Telegram post conversion:', error);
                errorMessage.textContent = '텔레그램 게시글 변환 중 오류가 발생했습니다.';
                errorMessage.style.display = 'block';
                telegramOutput.textContent = '오류가 발생했습니다.';
            } finally {
                telegramConvertBtn.disabled = false;
                telegramLoading.classList.add('hidden');
            }
        });
    });
    </script>
</body>
</html>

